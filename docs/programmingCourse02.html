<!DOCTYPE html>
<head>
  <title>javascript プログラミング講座 第2回</title>
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://unpkg.com/mermaid/dist/mermaid.min.css">
  <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
  <script>mermaid.initialize({startOnLoad:true});</script>
  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?lang=css&skin=Default"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS_CHTML"></script>
  <link rel="stylesheet" href="programmingCourse.css">
  <script src="programmingCourse.js"></script>
  <script src="programmingCourse02.js"></script>
</head>
<body>
<div class="box1">

  <h1>プログラミング講座 第2回</h1>
  <p>第2回の目標：javascriptの基本的な文法をもう少し確認する。</p>

  <h2>1.繰り返し(while)</h2>
  <p><span class="stronger">while文</span>でも繰り返す処理を行える。
  <p>whileに続く丸括弧の中に繰り返しが続行されるための条件を書く。下記の例では、変数iの値が10より小さいあいだ、3行目と4行目が繰り返し実行される。3行目のconsole.log(i)は変数iの値をログとして表示する命令である。4行目のi++を行わないと無限ループに陥るため、注意が必要である。
  <p>例</p>
  <pre class="prettyprint lang-js linenums">
    i = 0;
    while (i < 10) {
      console.log(i);
      i++;
    }
  </pre>
  <p>フローチャートで表すと以下である</p>
  <div class="mermaid">
    graph TB
    A([開始])
    B[i=0]
    C{i<10}
    D[iの値を表示する]
    E[i++]
    F([終了])
    A --> B
    B --> C
    C -->|yes| D
    D --> E
    E --> C
    C --->|no| F
  </div>

  <p class="reidaibox"><span class="reidai">例題1</span> 変数xへ0を代入せよ。その後、while文を用いて変数 x へ 0 から 9 までの値を順に足せ。</p>
  <textarea id="inputBox01"></textarea>
  <button onClick="kakunin01()">確認する</button>
  <div id="result01">結果:</div>

  <h2>2.配列の操作</h2>
  <p>一つの変数が1個の箱だとすると、配列は箱がいくつか並んだものである。</p>
  <p>配列の何番目のデータであるかを指定することで、データにアクセスできる。何番目のデータであるかを指定する際には、<span class="stronger">0から数え始める</span>ことに注意する。下記の例では、変数xに配列fruitsの0番目のもの（つまり"バナナ"）を代入している。</p>
  <p>例</p>
  <pre class="prettyprint lang-js linenums">
  fruits = ["バナナ", "りんご", "みかん"];
  x = fruits[0];
  </pre>
  <p>配列の長さとは、配列を箱が並んだものと見たときの並んだ箱の個数である。配列名.lengthで参照できる。下記の例では変数xに配列fruitsの長さ（つまり3）を代入している。</p>
  <p>例</p>
  <pre class="prettyprint lang-js linenums">
  fruits = ["バナナ", "りんご", "みかん"];
  x = fruits.length;
  </pre>
  <p>配列の内容を後から変更することもできる。下記の例では配列fruitsの1番目を"柿"にしている。つまり、配列fruitsは["バナナ", "柿", "みかん"]になる。</p>
  <p>例</p>
  <pre class="prettyprint lang-js linenums">
  fruits = ["バナナ", "りんご", "みかん"];
  fruits[1] = "柿";
  </pre>
  <p>長さが0の配列を用意することもできる。</p>
  <p>例</p>
  <pre class="prettyprint lang-js linenums">
  fruits = [];
  </pre>
  <p>配列の長さを増やすような変更も可能である。下記の例では、配列fruitsは["バナナ", "りんご", "みかん","すいか"]になる。</p>
  <p>例</p>
  <pre class="prettyprint lang-js linenums">
  fruits = [];
  fruits[0] = "バナナ";
  fruits[1] = "りんご";
  fruits[2] = "みかん";
  fruits[3] = "すいか";
  </pre>
  <p>これらの例でみたように、配列を扱うときは大括弧や角括弧といわれる[と]の記号を使う。</p>
  <p class="reidaibox"><span class="reidai">例題2</span> 配列flowerを用意し、値が0番目から順に"ばら","たんぽぽ","すみれ","さくら"になるようにせよ。</p>
  <textarea id="inputBox02"></textarea>
  <button onClick="kakunin02()">確認する</button>
  <div id="result02">結果:</div>

  <h2>3.繰り返しの処理と配列の操作</h2>
  <p>繰り返しの処理と配列は相性が良い。配列の各データを順に読み取ったり設定したりすることができるからである。下記の例では、配列numbersに0か9までの数を設定している。</p>
  <p>例</p>
  <pre class="prettyprint lang-js linenums">
  numbers = [];
  for (i = 0; i<10; i++) {
    numbers[i] = i;
  }
  </pre>
  <p class="reidaibox"><span class="reidai">例題3</span> 配列oddNumberを用意し、1,3,5,・・・と奇数を小さい順に10個格納せよ。</p>
  <textarea id="inputBox03"></textarea>
  <button onClick="kakunin03()">確認する</button>
  <div id="result03">結果:</div>

  <h2>4.関数</h2>
  <p>数学と同じように関数を利用できる。</p>
  <pre class="prettyprint lang-js linenums">
  function triangleArea(side, height) {
    return side * angle * 0.5;
  }

  myTriangle = triangleArea(5, 8);
  console.log(myTriangle);
  </pre>
  <p>上の例では、1～3行目でtriangleAreaという関数を定義している。関数を定義するタイミングでは、関数の中身の処理は実行されない。5行目でtriangleArea関数を呼び出しており、このとき初めて関数の中身である2行目の命令が実行される。つまり、パラメータの辺(side)と高さ(height)から三角形の面積を計算して返す。関数から返された値はmyTriangle変数に格納され、6行目で表示される。</p>
  <pre class="prettyprint lang-js linenums">
  function showWarning(str) {
    console.log("warning!!" + str);
    return;
  }

  showWarning("何度か");
  showWarning("関数を");
  showWarning("呼びます");
  </pre>
  <p>関数は値を返さなくてもよい。上の例では、1～4行目でshowWarningという関数を定義している。この関数はstrというパラメータを引き受けるが、特になにも返却しない(3行目のreturnの後に何も指定していないことに注目)。なおこれを実行するとコンソールに以下の内容が表示される。</p>
  <pre>
 warning!!何度か
 warning!!関数を
 warning!!呼びます
  </pre>
  <pre class="prettyprint lang-js linenums">
  function isOddNumber(checkTarget) {
    if ( checkTarget % 2 == 0 ) {
      return false;
    } else {
      return true;
    }
  }

  if(isOddNumber(varX)) {
    いろいろな処理
  }
  </pre>
  <p>上の例で、関数isOddNumberは1つのパラメータを受け取る(1行目)。その名前がcheckTargetである。checkTargetの名前は関数の外部では特に意味がないので、関数を定義する人が自由に決めてよい。</p>
  <p>isOddNumberを呼ぶ人はパラメータを渡す訳だが(上の例だと9行目)、それらが関数内部でどのように名づけられるか気にしない。</p>
  <p>名前がなんであってもプログラムは動くのであるが、関数やパラメータが何を意味するのか、分かりやすい名前をつけることはプログラムを作る上で非常に大事なことである。</p>
  <p class="reidaibox"><span class="reidai">例題4</span> 入力\(x\)に対して\(x^2 - 3x + 4\)を出力する関数myMathを定義せよ。</p>

  <textarea id="inputBox04"></textarea>
  <button onClick="kakunin04()">確認する</button>
  <div id="result04">結果:</div>

  <h2>5.変数のスコープ</h2>
  <p>変数のスコープとは変数の有効範囲である。</p>
  <pre class="prettyprint lang-js linenums">
  {
    let variableA;

    variableAを用いた色々な処理
  }
  ここでvariableAを使おうとするとエラー
  </pre>
  <p>{と}に囲まれた範囲をブロックという。上記では1行目から5行目が1つのブロックである。ブロック内でletを用いて定義された変数は、そのブロック内でのみ有効であり、ブロック外からアクセスするとエラーが起きる。
このようなスコープをブロックスコープという。関数やif文などでもブロックはつくられる。
  </p>
  <pre class="prettyprint lang-js linenums">
  function funcX(){
    let variableA;

    variableAを用いた色々な処理
  }

  function funcY(){
    let variableA;

    variableAを用いた色々な処理
  }
  </pre>
  <p>
    通常1つのブロックに同じ名前の変数は1つのみ許されるが、上記のように別々のブロックであれば、それぞれで同じ名前の変数が使える。
  </p>

  <pre class="prettyprint lang-js linenums">
  let variableA;

  function funcX(){
    variableAを用いた処理ができる
  }

  function funcY(){
    variableAを用いた処理ができる
  }

  variableAを用いた処理ができる
  </pre>
  <p>
    上記のように、すべてのブロックの外側で変数を宣言すると、すべての箇所からこの変数にアクセスできる。このようなスコープをグローバルスコープという。
  </p>
  <p>
    スコープが広いと変数の動きを把握しにくいため、<span class="stronger">変数のスコープはなるべく狭くする</span>のがうまいプログラムを作るコツである。
  </p>

  <pre class="prettyprint lang-js linenums">
  function funcX(){
    var variableA;

    variableAを用いた色々な処理
  }
  </pre>
  <p>
    上記のようにletでなくvarを使った変数の宣言もできるが、これは古い書き方なのでしてはいけない。
  </p>

  <pre class="prettyprint lang-js linenums">
  function funcX(){
    variableA; (let を忘れた！！)

    variableAを用いた色々な処理
  }

  function funcY(){
    variableAを用いた処理をするかも知れない
  }
  </pre>
  <p>
    上記のようにletを書き忘れると、変数がグローバルスコープ持つことになり、思わぬ挙動をする可能性があるので注意が必要である。
  </p>
  <p class="reidaibox"><span class="reidai">例題5</span> 2つのパラメータ(整数)を受け取り、1つめのパラメータの値から2つめのパラメータの値までを足した値を返す関数myAddを作れ。例：myAdd(5,7)を呼ぶと18が返る。ただし、2つめのパラメータの値が1つめのパラメータの値より大きくない場合は、-1を返せ。</p>
  <textarea id="inputBox05"></textarea>
  <button onClick="kakunin05()">確認する</button>
  <div id="result05">結果:</div>

  <h2>6.インデント</h2>
  <p>ブロックの中身にはインデント(字下げ)を施す。インデントは半角スペース2個や半角スペース4個やtabを使う。(いくつかの流儀がある)。javascriptは半角スペースやtabを無視するので、プログラムとしてはインデントは特に意味はなく、人間がプログラムを見やすくするための工夫である。<span class="stronger">全角スペースは使ってはいけない</span>。</p>
  <pre class="prettyprint lang-js linenums">
  function funcX(height, width){
    let squareArea;
    let Message;

    squareArea = height * width;

    if (squareArea > 100) {
      Message = "this is big square";

      if (squareArea > 1000) {
        Message = "this is very big square";
      }
    } else {
      Message = "this is small square";
    }

    さまざまな処理
  }
  </pre>
  <p>上の例では、2～17行目は関数のブロックの中であるので、全体的にインデントされている。ここでは半角スペース2個を使っている。8～12行目、14行目はif文のブロックの中なので、そこからさらにインデントされている。11行目はその中のif文のブロックの中なので、さらにさらにインデントされている。</p>
  <p>javascriptの文法としては{}がブロックを表すが、プログラマは普通インデントのレベルでプログラムの構造を見るためインデントは正確に行うのがよい。他の言語、例えばpythonではインデントが文法の一部であり、インデントでブロックを表す。</p>

  <p>
    <a href="programmingCourse01.html">第1回へ</a> <a href="index.html">目次へ</a> <a href="programmingCourse03.html">第3回へ</a> 
  </p>
</div>
</body>
<html>

